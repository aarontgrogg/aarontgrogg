var edcal={NO_DATE:"00000000",weeksPref:3,statusPref:!0,authorPref:!1,timePref:!0,doFeedbackPref:!0,isMoving:!1,inDrag:!1,isDragScrolling:!1,internalDateFormat:"ddMMyyyy",position:null,firstDayOfMonth:null,firstDayOfNextMonth:null,wp_dateFormat:"yyyy-MM-dd",cacheDates:[],tID:null,steps:0,CONCURRENCY_ERROR:4,PERMISSION_ERROR:5,NONCE_ERROR:6,currentDirection:!0,_wDate:Date.today(),moveDate:null,startOfWeek:null,posts:[],windowHeight:0,ltr:"ltr",isDraftsDrawerVisible:!1,init:function(){if(0!==jQuery("#edcal_scrollable").length){edcal.addFeedbackSection(),"true"===jQuery.cookie("edcal_drafts_drawer")&&(edcal.isDraftsDrawerVisible=!0,edcal.setDraftsDrawerVisible(edcal.isDraftsDrawerVisible)),jQuery("#loading").hide(),jQuery("#edcal_scrollable").css("height",edcal.getCalHeight()+"px"),edcal.windowHeight=jQuery(window).height(),edcal.createDaysHeader(),jQuery("#edcal_scrollable").scrollable({vertical:!0,size:edcal.weeksPref,keyboard:!1,keyboardSteps:1,speed:100,easing:"linear"});var e=jQuery("#edcal_scrollable").scrollable();e.getConf().keyboard=!1;var t=jQuery.cookie("edcal_date");t?(t=Date.parseExact(t,"yyyy-dd-MM"),edcal.output("Resetting to date from the edcal_Date cookie: "+t)):t=Date.today(),edcal.moveTo(t.clone()),jQuery("#edcal_scrollable").bind("mousewheel",function(e,t){var a=t>0?!1:!0,d=Math.abs(t);return edcal.output(a+" at a velocity of "+d),!edcal.isMoving&&d>.2&&edcal.move(1,a),!1}),e.onBeforeSeek(function(e,t){return!1}),jQuery(document).bind("keydown",function(e){if(27===e.keyCode)return!1;if(!jQuery("#edcal_quickedit").is(":visible")){if(40===e.keyCode&&!e.altKey&&!e.ctrlKey)return edcal.move(1,!0),!1;if(38===e.keyCode&&!e.altKey&&!e.ctrlKey)return edcal.move(1,!1),!1;if(34===e.keyCode&&!e.altKey&&!e.ctrlKey||40===e.keyCode&&e.ctrlKey)return edcal.move(edcal.weeksPref,!0),!1;if(33===e.keyCode&&!e.altKey&&!e.ctrlKey||38===e.keyCode&&e.ctrlKey)return edcal.move(edcal.weeksPref,!1),!1}}),edcal.getPosts(edcal.nextStartOfWeek(t).add(-3).weeks(),edcal.nextStartOfWeek(t).add(edcal.weeksPref+3).weeks()),jQuery("#moveToToday").click(function(){return edcal.moveTo(Date.today()),edcal.getPosts(edcal.nextStartOfWeek(Date.today()).add(-3).weeks(),edcal.nextStartOfWeek(Date.today()).add(edcal.weeksPref+3).weeks()),!1}),jQuery("#moveToLast").click(function(){if("-1"!==edcal.lastPostDate){var e=Date.parseExact(edcal.lastPostDate,"ddMMyyyy");return edcal.moveTo(e),edcal.getPosts(edcal.nextStartOfWeek(e).add(-3).weeks(),edcal.nextStartOfWeek(e).add(edcal.weeksPref+3).weeks()),!1}}),jQuery("#prevmonth").click(function(){return edcal.move(edcal.weeksPref,!1),!1}),jQuery("#nextmonth").click(function(){return edcal.move(edcal.weeksPref,!0),!1}),jQuery("#newPostScheduleButton").on("click",function(e){return jQuery(this).hasClass("disabled")?!1:(jQuery(this).addClass("disabled"),edcal.savePost(null,!1,!0))}),jQuery("#edcal-title-new-field").bind("keyup",function(e){return 0<jQuery("#edcal-title-new-field").val().length&&(!jQuery("#edcal-time").is(":visible")||0<jQuery("#edcal-time").val().length)?jQuery("#newPostScheduleButton").removeClass("disabled"):jQuery("#newPostScheduleButton").addClass("disabled"),13===e.keyCode?edcal.savePost(null,!0):void 0}),jQuery("#edcal-status").bind("change",function(e){edcal.updatePublishButton()}),jQuery("#edcal_weeks_pref").on("keyup",function(e){0<jQuery("#edcal_weeks_pref").val().length?jQuery("#edcal_applyoptions").removeClass("disabled"):jQuery("#edcal_applyoptions").addClass("disabled"),13===e.keyCode&&edcal.saveOptions()}),edcal.savePosition(),edcal.addOptionsSection(),jQuery("#edcal-time").timePicker({show24Hours:"H:i"===edcal.timeFormat,separator:":",step:30}),jQuery("#showdraftsdrawer").click(function(){edcal.setDraftsDrawerVisible(!edcal.isDraftsDrawerVisible)})}},setDraftsDrawerVisible:function(e,t){var a=jQuery("#showdraftsdrawer");a.hasClass("isLoaded")?t&&t():(a.addClass("isLoaded"),edcal.setupDraftsdrawer(t)),e?(jQuery("#cal_cont").css({"margin-right":"13.5%"}),jQuery("#draftsdrawer_cont").css({display:"block",width:"13%"}),a.html(edcal.str_hidedrafts)):(jQuery("#cal_cont").css({"margin-right":"0"}),jQuery("#draftsdrawer_cont").css({display:"none",width:"0"}),a.html(edcal.str_showdrafts)),edcal.isDraftsDrawerVisible=e,jQuery.cookie("edcal_drafts_drawer",e,{expires:2060})},setupDraftsdrawer:function(e){jQuery("#draftsdrawer_loading").css({display:"block"}),edcal.getPosts(edcal.NO_DATE,null,function(){edcal.initDraftsdrawer(),e&&e()})},initDraftsdrawer:function(){var e;e=""+('<a href="#" adddate="'+edcal.NO_DATE+'" class="daynewlink" style="margin-top: 5px;"title="'+edcal.str_newdraft+'" id="unscheduledNewLink" onclick="edcal.addDraft(); return false;">'+edcal.str_addDraftLink+"</a>"),e=e+'<ul class="postlist">'+edcal.getPostItems(edcal.NO_DATE),e+="</ul>",edcal.draggablePost("#row"+edcal._wDate.toString(edcal.internalDateFormat)+" li.post"),edcal.makeDroppable(jQuery("#draftsdrawer div.day")),jQuery("#unscheduled").append(e),jQuery("#draftsdrawer_loading").css({display:"none"}),e=jQuery("#cal_cont"),jQuery("#unscheduled ul.postlist").css("min-height",e.height()-10-jQuery("#draftsdrawer .draftsdrawerheadcont").height()-jQuery("#unscheduledNewLink").outerHeight()),jQuery("#unscheduled").mouseout(function(){jQuery("#unscheduledNewLink").hide()}).mouseover(function(){jQuery("#unscheduledNewLink").show()})},alignGrid:function(e,t,a,d,r){if("draftsdrawer"!==jQuery(e).parent().attr("id")){var s=0,l=0,o=1;jQuery(e).each(function(){jQuery(this).css("position","relative");var e=jQuery(this).children("div");if(1===t||"ltr"===edcal.ltr)for(var c=0;c<e.length;c++)e.eq(c).css({width:a+"%",height:d+"%",position:"absolute",left:s+"%",top:l+"%"}),0===o%t?(s=0,l+=d+r):s+=a+r,o++;else for(c=e.length-1;c>-1;c--)e.eq(c).css({width:a+"%",height:d+"%",position:"absolute",left:s+"%",top:l+"%"}),0===o%t?(s=0,l+=d+r):s+=a+r,o++})}},alignCal:function(){edcal.alignGrid("#cal",1,100,100/edcal.weeksPref-1,1)},createDaysHeader:function(){var e=Date.today().next().sunday();edcal.nextStartOfWeek(e);var t='<div class="dayheadcont"><div class="dayhead firstday">'+e.add(edcal.startOfWeek).days().toString("dddd")+"</div>",t=t+('<div class="dayhead">'+e.add(1).days().toString("dddd")+"</div>"),t=t+('<div class="dayhead">'+e.add(1).days().toString("dddd")+"</div>"),t=t+('<div class="dayhead">'+e.add(1).days().toString("dddd")+"</div>"),t=t+('<div class="dayhead">'+e.add(1).days().toString("dddd")+"</div>"),t=t+('<div class="dayhead">'+e.add(1).days().toString("dddd")+"</div>"),t=t+('<div class="dayhead lastday">'+e.add(1).days().toString("dddd")+"</div>");jQuery("#cal_cont").prepend(t),edcal.alignGrid(".dayheadcont",7,13.8,100,.5)},getDateClass:function(e){var t,a;return a=-1===e.compareTo(Date.today())?"beforeToday":"todayAndAfter",edcal.firstDayOfMonth||(edcal.firstDayOfMonth=Date.today().moveToFirstDayOfMonth().clearTime(),edcal.firstDayOfNextMonth=Date.today().moveToLastDayOfMonth().clearTime()),e.between(edcal.firstDayOfMonth,edcal.firstDayOfNextMonth)?t="month-present":1===e.compareTo(edcal.firstDayOfMonth)?t="month-future":-1===e.compareTo(edcal.firstDayOfNextMonth)&&(t="month-past"),"01"===e.toString("dd")&&(a+=" firstOfMonth"),t+" "+a},showAddPostLink:function(e){edcal.inDrag||(e=jQuery("#"+e+" a.daynewlink"),e.css("display","block"),e.bind("click",edcal.addPost))},hideAddPostLink:function(e){jQuery("#"+e+" a.daynewlink").hide().unbind("click",edcal.addPost)},createRow:function(e,t){for(var a=edcal._wDate.clone(),d='<div class="rowcont" id="row'+edcal._wDate.toString(edcal.internalDateFormat)+'"><div id="row'+edcal._wDate.toString(edcal.internalDateFormat)+'row" class="edcal_row">',r=0;7>r;r++)d+="<div onmouseover=\"edcal.showAddPostLink('"+a.toString(edcal.internalDateFormat)+"');\" onmouseout=\"edcal.hideAddPostLink('"+a.toString(edcal.internalDateFormat)+'\');" id="'+a.toString(edcal.internalDateFormat)+'" class="day '+edcal.getDateClass(a)+" "+a.toString("dddd").toLowerCase()+" month-"+a.toString("MM").toLowerCase()+'">',d+='<div class="dayobj">',d+='<a href="#" adddate="'+a.toString("MMMM d")+'" class="daynewlink" title="'+sprintf(edcal.str_newpost,edcal.chineseAposWorkaround(a.toString(Date.CultureInfo.formatPatterns.monthDay)))+'" onclick="return false;">'+edcal.str_addPostLink+"</a>",d="01"===a.toString("dd")?d+('<div class="daylabel">'+a.toString("MMM d")):d+('<div class="daylabel">'+a.toString("d")),d+="</div>",d+='<ul class="postlist">',d+=edcal.getPostItems(a.toString(edcal.internalDateFormat)),d+="</ul>",d+="</div>",d+="</div>",a.add(1).days();return d+="</div></div>",t?e.append(d):e.prepend(d),edcal.alignGrid("#row"+edcal._wDate.toString(edcal.internalDateFormat)+"row",7,13.9,100,.5),edcal.draggablePost("#row"+edcal._wDate.toString(edcal.internalDateFormat)+" li.post"),edcal.makeDroppable(jQuery("#row"+edcal._wDate.toString(edcal.internalDateFormat)+" > div > div.day")),jQuery("row"+edcal._wDate.toString(edcal.internalDateFormat))},makeDroppable:function(e){e.droppable({hoverClass:"day-active",accept:function(e){return jQuery(this).hasClass("beforeToday")?e.hasClass("draft")?!0:!1:!0},greedy:!0,tolerance:"pointer",drop:function(e,t){var a=t.draggable.parent().parent().parent().attr("id");edcal.doDrop(a,t.draggable.attr("id"),jQuery(this).attr("id"))}})},doDrop:function(e,t,a,d){var r=edcal.findPostForId(e,t);edcal.removePostFromMap(e,t);var s=jQuery("#"+t);s.detach(),setTimeout(function(){s.remove()},500),jQuery("#"+a+" .postlist").append(edcal.createPostItem(r,a)),e===a?edcal.draggablePost("#"+a+" .post"):edcal.changeDate(a,r,d)},draggablePost:function(e){jQuery(e).each(function(){var e=edcal.findPostForId(jQuery(this).parent().parent().parent().attr("id"),jQuery(this).attr("id"));edcal.isPostMovable(e)&&(jQuery(this).draggable({revert:"invalid",appendTo:"body",helper:"clone",distance:1,addClasses:!1,start:function(){edcal.inDrag=!0},stop:function(){edcal.inDrag=!1},drag:function(e,t){edcal.handleDrag(e,t)},scroll:!1,refreshPositions:!0}),jQuery(this).addClass("draggable"))})},handleDrag:function(e,t){edcal.isMoving||edcal.isDragScrolling||(edcal.isDragScrolling=!0,e.pageY<edcal.position.top+10?edcal.move(1,!1):e.pageY>edcal.position.bottom-10&&edcal.move(1,!0),setTimeout(function(){edcal.isDragScrolling=!1},300))},removePostFromMap:function(e,t){if(edcal.posts[e])for(var a=0;a<edcal.posts[e].length;a++)if(edcal.posts[e][a]&&"post-"+edcal.posts[e][a].id===t)return edcal.posts[e][a]=null,!0;return!1},addPostItem:function(e,t){jQuery("#"+t+" > div > ul").append(edcal.createPostItem(e,t))},addPostItemDragAndToolltip:function(e){edcal.draggablePost("#"+e+" > div > ul > li")},deletePost:function(e,t){var a=edcal.ajax_url()+"&action=edcal_deletepost&postid="+e;jQuery.ajax({url:a,type:"POST",processData:!1,timeout:1e5,dataType:"json",success:function(e){e.post.date_gmt===edcal.NO_DATE?edcal.removePostItem(e.post.date_gmt,"post-"+e.post.id):edcal.removePostItem(e.post.date,"post-"+e.post.id),e.error?e.error===edcal.NONCE_ERROR&&edcal.showError(edcal.checksum_error):edcal.output('Finished deleting the post: "'+e.post.title+'" with id:'+e.post.id),t&&t(e)},error:function(e){edcal.showError(edcal.general_error),e.responseText&&edcal.output("deletePost xhr.responseText: "+e.responseText)}})},confirmDelete:function(e){return confirm(edcal.str_del_msg1+e+edcal.str_del_msg2)?!0:!1},ajax_url:function(){return ajaxurl+"?_wpnonce="+edcal.wp_nonce},getMediaBar:function(){return jQuery("#cal_mediabar").html()},addPost:function(){jQuery("#newPostScheduleButton").addClass("disabled");var e=jQuery(this).parent().parent().attr("id"),t=edcal.defaultTime;return"H:i"!==edcal.timeFormat&&"G:i"!==edcal.timeFormat&&(t+=" AM"),e={id:0,date:e,formatteddate:edcal.getDayFromDayId(e).toString(edcal.previewDateFormat),time:t},edcal.showForm(e),!1},addDraft:function(){jQuery("#newPostScheduleButton").addClass("disabled");var e={id:0,date:Date.today(),formatteddate:edcal.NO_DATE,time:edcal.NO_DATE,status:"draft"};return edcal.showForm(e),!1},editPost:function(e){return jQuery("#newPostScheduleButton").removeClass("disabled"),edcal.getPost(e,edcal.showForm),!1},savePost:function(e,t,a,d){if(("undefined"==typeof e||null===e)&&(e=edcal.serializePost()),!e.title||""===e.title)return!1;edcal.output("savePost("+e.date+", "+e.title+")"),jQuery("#edit-slug-buttons").addClass("tiploading");var r=e.time.toUpperCase();"12"===r.slice(0,2)&&"PM"===r.slice(r.length-2,r.length)?e.time="12:"+r.slice(3,5):"12"===r.slice(0,2)&&"AM"===r.slice(e.time.length-2,e.time.length)&&(e.time="00:"+r.slice(3,5));var s,r=""!==e.time?Date.parse(e.time):Date.parse(edcal.defaultTime);if(null!==r&&r!==edcal.NO_DATE){var l=r.format("H:i:s");s=encodeURIComponent(edcal.getDayFromDayId(e.date).toString(edcal.wp_dateFormat)+" "+l)}else s=encodeURIComponent(e.date.toString(edcal.wp_dateFormat+" H:i:s"));return l=edcal.ajax_url()+"&action=edcal_savepost",e="date="+s+"&title="+encodeURIComponent(e.title)+"&content="+encodeURIComponent(e.content)+"&id="+encodeURIComponent(e.id)+"&status="+encodeURIComponent(e.status)+"&orig_status="+encodeURIComponent(e.orig_status),(null===r||r===edcal.NO_DATE)&&(e+="&date_gmt="+encodeURIComponent("0000-00-00 00:00:00")),edcal.getUrlVars().post_type&&(e+="&post_type="+encodeURIComponent(edcal.getUrlVars().post_type)),a&&(e+="&dopublish="+encodeURIComponent("future")),jQuery.ajax({url:l,type:"POST",processData:!1,data:e,timeout:1e5,dataType:"json",success:function(e){if(jQuery("#edit-slug-buttons").removeClass("tiploading"),jQuery("#edcal_quickedit").hide(),jQuery("#edcal_scrollable").data("scrollable").getConf().keyboard=!0,e.error)return e.error===edcal.NONCE_ERROR&&edcal.showError(edcal.checksum_error),!1;if(e.post)if(t)window.location=e.post.editlink.replace("&amp;","&");else{var a=e.post.date;e.post.date_gmt===edcal.NO_DATE&&(a=e.post.date_gmt),e.post.id&&edcal.removePostItem(a,"post-"+e.post.id),edcal.addPostItem(e.post,a),edcal.addPostItemDragAndToolltip(a)}else edcal.showError("There was an error creating a new post for your blog.");return d&&d(e),!0},error:function(e){jQuery("#edit-slug-buttons").removeClass("tiploading"),jQuery("#edcal_quickedit").hide(),jQuery("#edcal_scrollable").data("scrollable").getConf().keyboard=!0,edcal.showError(edcal.general_error),e.responseText&&edcal.output("savePost xhr.responseText: "+e.responseText)}}),!1},serializePost:function(){var e={};return jQuery("#edcal_quickedit").find("input, textarea, select").each(function(){e[this.name]=this.value}),e},showForm:function(e){edcal.resetForm(),e.formatteddate===edcal.NO_DATE||e.date_gmt===edcal.NO_DATE?jQuery("#timeEditControls").hide():jQuery("#timeEditControls").show(),jQuery("#edcal_quickedit").center().show(),jQuery("#edcal_scrollable").data("scrollable").getConf().keyboard=!1,e.id?(jQuery("#tooltiptitle").text(sprintf(edcal.str_edit_post_title,e.typeTitle,edcal.getDayFromDayId(e.date).toString(edcal.previewDateFormat))),jQuery("#edcal-title-new-field").val(e.title),jQuery("#content").val(e.content)):e.formatteddate===edcal.NO_DATE?jQuery("#tooltiptitle").text(edcal.str_newdraft_title):jQuery("#tooltiptitle").text(edcal.str_newpost_title+e.formatteddate),"future"===e.status&&jQuery("#newPostScheduleButton").text(edcal.str_update),e.status?(jQuery("#edcal-status").val(e.status),edcal.updatePublishButton()):(0!=jQuery("#edcal-status option[value="+edcal.defaultStatus+"]").length?jQuery("#edcal-status").val(edcal.defaultStatus):jQuery("#edcal-status").val("draft"),jQuery("#newPostScheduleButton").text(edcal.str_save)),e.status&&"draft"!==e.status&&"future"!==e.status&&"pending"!==e.status&&(jQuery("#edcal-status").attr("disabled","true"),jQuery("#edcal-status").append('<option class="temp" value="'+e.status+'">'+e.status+"</option>"),jQuery("#edcal-status").val(e.status)),e.formatteddate!==edcal.NO_DATE&&-1===edcal.getDayFromDayId(e.date).compareTo(Date.today())&&jQuery("#edcal-status").attr("disabled","true");var t=e.time;jQuery("#edcal-time").val(t),jQuery("#edcal-date").val(e.date),jQuery("#edcal-id").val(e.id),jQuery("#edcal-title-new-field").focus(),jQuery("#edcal-title-new-field").select()},hideForm:function(){jQuery("#edcal_quickedit").hide(),jQuery("#edcal_scrollable").data("scrollable").getConf().keyboard=!0,edcal.resetForm()},resetForm:function(){jQuery("#edcal_quickedit").find("input, textarea, select").each(function(){this.value=""}),jQuery("#edcal-status").removeAttr("disabled"),jQuery("#newPostScheduleButton").text(edcal.str_publish),jQuery("#tooltiptitle").text(""),jQuery("#edcal-status").removeAttr("disabled"),jQuery("#edcal-status .temp").remove()},createPostItem:function(e,t){return edcal.posts[t]||(edcal.posts[t]=[]),edcal.posts[t][edcal.posts[t].length]=e,edcal.getPostItemString(e)},findPostForId:function(e,t){if(edcal.posts[e])for(var a=0;a<edcal.posts[e].length;a++)if(edcal.posts[e][a]&&"post-"+edcal.posts[e][a].id===t)return edcal.posts[e][a];return null},removePostItem:function(e,t){if(edcal.output("removePostItem("+e+", "+t+")"),edcal.findPostForId(e,t))for(var a=0;a<edcal.posts[e].length;a++)edcal.posts[e][a]&&"post-"+edcal.posts[e][a].id===t&&(edcal.posts[e][a]=null);jQuery("#"+t).remove()},getPostItems:function(e){var t="";if(edcal.posts[e]){var a=edcal.posts[e];if(50>a.length)for(e=0;e<a.length;e++)a[e]&&(t+=edcal.getPostItemString(a[e]));else edcal.addPostItems(e,0,50)}return t},addPostItems:function(e,t,a){var d=edcal.posts[e],r="";setTimeout(function(){for(var s=t;t+a>s&&s<d.length;s++)d[s]&&(r+=edcal.getPostItemString(d[s]));jQuery("#"+e+" ul").append(r),t+a<d.length&&edcal.addPostItems(e,t+a,50)},100)},showActionLinks:function(e){edcal.actionTimer&&clearTimeout(edcal.actionTimer);var t=edcal.findPostForId(jQuery("#"+e).parent().parent().parent().attr("id"),e);if(!edcal.inDrag&&edcal.isPostEditable(t)){var a=jQuery("#"+e+" > div.postactions");edcal.actionLinksElem&&edcal.actionLinksElem.get(0)!==a.get(0)&&edcal.actionLinksElem.slideUp(),edcal.actionLinksElem=a,edcal.actionTimer=setTimeout(function(){if(a.slideDown(),a.parent().position().top+a.parent().height()>a.parent().parent().height()){var t=jQuery("#"+e+" > div.postactions").parent().parent();t.scrollTop(t.scrollTop()+45)}},250)}},hideActionLinks:function(e){edcal.actionTimer&&clearTimeout(edcal.actionTimer),edcal.actionTimer=setTimeout(function(){jQuery("#"+e+" > div.postactions").slideUp(),edcal.actionLinksElem=null},1e3)},isPostMovable:function(e){return e.editlink&&"publish"!==e.status},isPostEditable:function(e){return e.editlink},getPostEditableClass:function(e){return e.editlink?"":"readonly"},getPostItemString:function(e){var t=e.title;return""===t&&(t="[No Title]"),edcal.statusPref&&("draft"===e.status&&"1"===e.sticky?t+=edcal.str_draft_sticky:"pending"===e.status&&"1"===e.sticky?t+=edcal.str_pending_sticky:"1"===e.sticky?t+=edcal.str_sticky:"pending"===e.status?t+=edcal.str_pending:"draft"===e.status?t+=edcal.str_draft:"publish"!==e.status&&"future"!==e.status&&"pending"!==e.status&&(t+=" ["+e.status+"]")),edcal.timePref&&(t='<span class="posttime">'+e.formattedtime+"</span> "+t),edcal.authorPref&&(t=sprintf(edcal.str_by,t,'<span class="postauthor">'+e.author+"</span>")),edcal.isPostMovable(e)?"<li onmouseover=\"edcal.showActionLinks('post-"+e.id+"');\" onmouseout=\"edcal.hideActionLinks('post-"+e.id+'\');" id="post-'+e.id+'" class="post '+e.status+" "+edcal.getPostEditableClass(e)+e.slugs+'"><div class="postlink "><span>'+t+'</span></div><div class="postactions"><a href="'+e.editlink+'">'+edcal.str_edit+'</a> | <a href="#" onclick="edcal.editPost('+e.id+'); return false;">'+edcal.str_quick_edit+'</a> | <a href="'+e.dellink+'" onclick="return edcal.confirmDelete(\''+e.title+"');\">"+edcal.str_del+'</a> | <a href="'+e.permalink+'">'+edcal.str_view+"</a></div></li>":"<li onmouseover=\"edcal.showActionLinks('post-"+e.id+"');\" onmouseout=\"edcal.hideActionLinks('post-"+e.id+'\');" id="post-'+e.id+'" class="post '+e.status+" "+edcal.getPostEditableClass(e)+'"><div class="postlink "><span>'+t+'</span></div><div class="postactions"><a href="'+e.editlink+'">'+edcal.str_republish+'</a> | <a href="'+e.permalink+'">'+edcal.str_view+"</a></div></li>"},setClassforToday:function(){jQuery("#"+Date.today().toString(edcal.internalDateFormat)).addClass("today")},getCalHeight:function(){var e=jQuery(window).height()-jQuery("#footer").height()-jQuery("#wphead").height()-150;return Math.max(e,500)},move:function(e,t,a){if(!jQuery("#edcal_quickedit").is(":visible")){edcal.currentDirection!==t&&(edcal._wDate=t?edcal._wDate.add(7*(edcal.weeksPref+7)).days():edcal._wDate.add(-(7*(edcal.weeksPref+7))).days(),edcal.steps=0,edcal.moveDate=edcal._wDate),edcal.currentDirection=t;var d;if(t)for(d=0;e>d;d++)jQuery("#cal > div:first").remove(),edcal.createRow(jQuery("#cal"),!0),edcal._wDate.add(7).days();else for(d=0;e>d;d++)jQuery("#cal > div:last").remove(),edcal.createRow(jQuery("#cal"),!1),edcal._wDate.add(-7).days();edcal.alignCal(),edcal.setClassforToday(),edcal.setDateLabel(),edcal.steps+=e,edcal.tID?clearTimeout(edcal.tID):edcal.moveDate=edcal._wDate,edcal.tID=setTimeout(function(){t?edcal.getPosts(edcal._wDate.clone().add(-7*(edcal.steps+1)).days(),edcal._wDate.clone(),a):edcal.getPosts(edcal._wDate.clone(),edcal._wDate.clone().add(7*(edcal.steps+1)).days(),a),edcal.steps=0,edcal.tID=null,edcal.moveDate=edcal._wDate},1e3),t?jQuery.cookie("edcal_date",edcal._wDate.clone().add(-(edcal.weeksPref+4)).weeks().toString("yyyy-dd-MM")):jQuery.cookie("edcal_date",edcal._wDate.clone().add(3).weeks().toString("yyyy-dd-MM"))}},getDayFromDayId:function(e){return Date.parseExact(e.substring(2,4)+"/"+e.substring(0,2)+"/"+e.substring(4),"MM/dd/yyyy")},setDateLabel:function(e){var t=jQuery("#edcal_scrollable").scrollable().getVisibleItems();e=edcal.getDayFromDayId(t.eq(0).children(".edcal_row").children(".day:first").attr("id")),t=edcal.getDayFromDayId(t.eq(edcal.weeksPref-1).children(".edcal_row").children(".day:last").attr("id")),jQuery("#currentRange").text(edcal.chineseAposWorkaround(e.toString(Date.CultureInfo.formatPatterns.yearMonth))+" - "+edcal.chineseAposWorkaround(t.toString(Date.CultureInfo.formatPatterns.yearMonth)))},nextStartOfWeek:function(e){if(e=e.clone(),null===edcal.startOfWeek)if(edcal.locale){var t=edcal.locale.toUpperCase();edcal.endsWith(t,"AS")||edcal.endsWith(t,"AZ")||edcal.endsWith(t,"BW")||edcal.endsWith(t,"CA")||edcal.endsWith(t,"CN")||edcal.endsWith(t,"FO")||edcal.endsWith(t,"GB")||edcal.endsWith(t,"GE")||edcal.endsWith(t,"GL")||edcal.endsWith(t,"GU")||edcal.endsWith(t,"HK")||edcal.endsWith(t,"IE")||edcal.endsWith(t,"IL")||edcal.endsWith(t,"IN")||edcal.endsWith(t,"IS")||edcal.endsWith(t,"JM")||edcal.endsWith(t,"JP")||edcal.endsWith(t,"KG")||edcal.endsWith(t,"KR")||edcal.endsWith(t,"LA")||edcal.endsWith(t,"MH")||edcal.endsWith(t,"MN")||edcal.endsWith(t,"MO")||edcal.endsWith(t,"MP")||edcal.endsWith(t,"MT")||edcal.endsWith(t,"NZ")||edcal.endsWith(t,"PH")||edcal.endsWith(t,"PK")||edcal.endsWith(t,"SG")||edcal.endsWith(t,"SY")||edcal.endsWith(t,"TH")||edcal.endsWith(t,"TT")||edcal.endsWith(t,"TW")||edcal.endsWith(t,"UM")||edcal.endsWith(t,"US")||edcal.endsWith(t,"UZ")||edcal.endsWith(t,"VI")||edcal.endsWith(t,"ZW")?edcal.startOfWeek=0:edcal.endsWith(t,"MV")?edcal.startOfWeek=5:edcal.endsWith(t,"AF")||edcal.endsWith(t,"BH")||edcal.endsWith(t,"DJ")||edcal.endsWith(t,"DZ")||edcal.endsWith(t,"EG")||edcal.endsWith(t,"ER")||edcal.endsWith(t,"ET")||edcal.endsWith(t,"IQ")||edcal.endsWith(t,"IR")||edcal.endsWith(t,"JO")||edcal.endsWith(t,"KE")||edcal.endsWith(t,"KW")||edcal.endsWith(t,"LY")||edcal.endsWith(t,"MA")||edcal.endsWith(t,"OM")||edcal.endsWith(t,"QA")||edcal.endsWith(t,"SA")||edcal.endsWith(t,"SD")||edcal.endsWith(t,"SO")||edcal.endsWith(t,"TN")||edcal.endsWith(t,"YE")?edcal.startOfWeek=6:edcal.startOfWeek=1}else edcal.startOfWeek=0;return e.next().sunday().add(edcal.startOfWeek).days()},endsWith:function(e,t){return e.match(t+"$")===t},moveTo:function(e){edcal.isMoving=!0,jQuery("#cal").empty(),jQuery.cookie("edcal_date",e.toString("yyyy-dd-MM")),edcal._wDate=edcal.nextStartOfWeek(e).add(-21).days(),edcal.currentDirection=!0,e=edcal.weeksPref+6;for(var t=0;e>t;t++)edcal.createRow(jQuery("#cal"),!0),edcal._wDate.add(7).days();edcal.alignCal(),jQuery("#edcal_scrollable").scrollable().move(2),edcal.setDateLabel(),edcal.setClassforToday(),edcal.isMoving=!1},savePosition:function(){var e=jQuery("#edcal_scrollable"),t=jQuery("#cal_cont");edcal.position={top:e.offset().top,bottom:e.offset().top+e.height()},jQuery("#edcal_poststyle").remove(),e=jQuery(".rowcont:eq(2) .dayobj:first").height()-jQuery(".rowcont:eq(2) .daylabel:first").height()-6,jQuery("head").append('<style id="edcal_poststyle" type="text/css">.ui-draggable-dragging {width: '+(jQuery(".rowcont:eq(2) .day:first").width()-5)+"px;}.postlist {height: "+e+"px;}</style>"),jQuery("#draftsdrawer").css("height",t.height()),jQuery("#draftsdrawer .day").css("min-height",t.height()-10-jQuery("#draftsdrawer .draftsdrawerheadcont").height())},addFeedbackSection:function(){3<edcal.visitCount&&edcal.doFeedbackPref&&jQuery("#edcal_main_title").after(edcal.str_feedbackmsg)},doFeedback:function(){jQuery.getScript("http://www.zackgrossbart.com/edcal/mint/?js",function(){edcal.saveFeedbackPref()})},noFeedback:function(){jQuery("#feedbacksection").hide("fast"),edcal.saveFeedbackPref()},saveFeedbackPref:function(){var e=edcal.ajax_url()+"&action=edcal_saveoptions&dofeedback="+encodeURIComponent("done");jQuery.ajax({url:e,type:"POST",processData:!1,timeout:1e5,dataType:"text",success:function(e){jQuery("#feedbacksection").html(edcal.str_feedbackdone),setTimeout(function(){jQuery("#feedbacksection").hide("slow")},5e3)},error:function(e){edcal.showError(edcal.general_error),e.responseText&&edcal.output("saveOptions xhr.responseText: "+e.responseText)}})},updatePublishButton:function(){"future"===jQuery("#edcal-status").val()&&jQuery("#newPostScheduleButton").text(edcal.str_publish),"pending"===jQuery("#edcal-status").val()?jQuery("#newPostScheduleButton").text(edcal.str_review):jQuery("#newPostScheduleButton").text(edcal.str_save)},changeDate:function(e,t,a){edcal.output("changeDate("+e+", "+t+")");var d=e===edcal.NO_DATE,r=t.date_gmt===edcal.NO_DATE,s=d?"0000-00-00":edcal.getDayFromDayId(e).toString(edcal.wp_dateFormat),l=r?t.date_gmt:edcal.getDayFromDayId(t.date).toString(edcal.wp_dateFormat);d&&(t.status="draft"),s=edcal.ajax_url()+"&action=edcal_changedate&postid="+t.id+"&postStatus="+t.status+"&newdate="+s+"&olddate="+l,jQuery("#post-"+t.id).addClass("loadingclass"),jQuery.ajax({url:s,type:"POST",processData:!1,timeout:1e5,dataType:"json",success:function(t){edcal.output("res.post.date="+t.post.date),edcal.output(t.post),t.error&&(edcal.removePostItem(e,"post-"+t.post.id),t.error===edcal.CONCURRENCY_ERROR?edcal.displayMessage(edcal.concurrency_error+"<br />"+t.post.title):t.error===edcal.PERMISSION_ERROR?edcal.displayMessage(edcal.permission_error):t.error===edcal.NONCE_ERROR&&edcal.displayMessage(edcal.checksum_error));var s=d?"00000000":t.post.date,l=r?e:s;edcal.removePostItem(s,"post-"+t.post.id),edcal.addPostItem(t.post,l),edcal.addPostItemDragAndToolltip(l),a&&a(t)},error:function(e,t,a){edcal.showError(edcal.general_error),edcal.output("textStatus: "+t),edcal.output("error: "+a),e.responseText&&edcal.output("changeDate xhr.responseText: "+e.responseText)}})},getPosts:function(e,t,a){t||(t=""),edcal.cacheDates[e]?a&&a():(edcal.cacheDates[e]=!0,t=edcal.ajax_url()+"&action=edcal_posts&from="+e.toString("yyyy-MM-dd")+"&to="+t.toString("yyyy-MM-dd"),edcal.getUrlVars().post_type&&(t+="&post_type="+encodeURIComponent(edcal.getUrlVars().post_type)),jQuery("#loading").show(),jQuery.ajax({url:t,type:"GET",processData:!1,timeout:1e5,dataType:"text",success:function(t){jQuery("#loading").hide();var d=null;try{d=JSON.parseIt(t)}catch(r){return edcal.showFatalError(edcal.str_fatal_parse_error+r.message),void(window.console&&console.error(r))}if(d.error)d.error===edcal.NONCE_ERROR&&edcal.showError(edcal.checksum_error);else{for(var s=[],l=d.length;l>=0;l--){var o=d[l];o&&"trash"!==o.status&&(o.date=o.date.replace(o.date.substring(2,3),o.date.substring(2,3).toUpperCase()),"00000000"===e&&(o.date=e),edcal.removePostItem(o.date,"post-"+o.id),edcal.addPostItem(o,o.date),s[s.length]=o.date)}setTimeout(function(){jQuery.each(s,function(e,t){edcal.addPostItemDragAndToolltip(t)})},300),a&&a(t)}},error:function(e){edcal.showError(edcal.general_error),e.responseText&&edcal.output("getPosts xhr.responseText: "+e.responseText)}}))},getPost:function(e,t){if(0===e)return!1;jQuery("#loading").show();var a=edcal.ajax_url()+"&action=edcal_getpost&postid="+e;return edcal.getUrlVars().post_type&&(a+="&post_type="+encodeURIComponent(edcal.getUrlVars().post_type)),jQuery.ajax({url:a,type:"GET",processData:!1,timeout:1e5,dataType:"json",success:function(e){return jQuery("#loading").hide(),edcal.output("xhr for getPost returned: "+e),e.error?(e.error===edcal.NONCE_ERROR&&edcal.showError(edcal.checksum_error),!1):("function"==typeof t&&t(e.post),e.post)},error:function(e){return jQuery("#loading").hide(),edcal.showError(edcal.general_error),e.responseText&&edcal.output("getPost xhr.responseText: "+e.responseText),!1}}),!0},addOptionsSection:function(){var e='<div class="hide-if-no-js screen-meta-toggle" id="screen-options-link-wrap"><a class="show-settings" id="show-edcal-settings-link" onclick="edcal.toggleOptions(); return false;" href="#" >'+edcal.str_screenoptions+"</a></div>";0===jQuery("#screen-meta-links").length&&jQuery("#screen-meta").after('<div id="screen-meta-links"></div>'),jQuery("#screen-meta-links").append(e)},toggleOptions:function(){if(edcal.helpMeta)jQuery("#contextual-help-wrap").slideUp("fast"),jQuery("#contextual-help-wrap").html(edcal.helpMeta),edcal.helpMeta=null,jQuery("#show-edcal-settings-link").removeClass("screen-meta-active"),jQuery("#contextual-help-link-wrap").css("visibility","");else{edcal.helpMeta=jQuery("#contextual-help-wrap").html();for(var e='<div class="metabox-prefs" id="calendar-fields-prefs"><h5>'+edcal.str_show_opts+'</h5><label for="author-hide"><input type="checkbox" '+edcal.isPrefChecked(edcal.authorPref)+'value="true" id="author-hide" name="author-hide" class="hide-column-tog" />'+edcal.str_opt_author+'</label><label for="status-hide"><input type="checkbox" '+edcal.isPrefChecked(edcal.statusPref)+'value="true" id="status-hide" name="status-hide" class="hide-column-tog" />'+edcal.str_opt_status+'</label><label for="time-hide"><input type="checkbox" '+edcal.isPrefChecked(edcal.timePref)+'value="true" id="time-hide" name="time-hide" class="hide-column-tog" />'+edcal.str_opt_time+"</label></div>",e=e+('<div class="metabox-prefs"><h5>'+edcal.str_show_title+'</h5><select id="edcal_weeks_pref" class="screen-per-page" title="'+edcal.str_weekstt+'"> '),t=parseInt(edcal.weeksPref,10),a=1;9>a;a++)e=a===t?e+('<option selected="true">'+a+"</option>"):e+("<option>"+a+"</option>");e+="</select>"+edcal.str_opt_weeks+"</div>",e+='<br /><button id="edcal_applyoptions" onclick="edcal.saveOptions(); return false;" class="save button">'+edcal.str_apply+"</button>",jQuery("#contextual-help-wrap").html(e),jQuery("#contextual-help-link-wrap").css("visibility","hidden"),jQuery("#contextual-help-wrap").slideDown("normal"),jQuery("#screen-meta").show(),jQuery("#show-edcal-settings-link").addClass("screen-meta-active")}},generateColorPicker:function(e,t,a){e='<div id="'+t+'" class="optionscolorrow">'+('<span style="background-color: '+a+';" class="colorlabel"> '+e+"</span> ");var d="lightred orange yellow lightgreen lightblue purple lightgray".split(" ");edcal.output("colors.length: "+d.length);for(var r=0;r<d.length;r++)e+='<a href="#" class="optionscolor ',d[r]===a&&(e+="colorselected"),e+='" class='+t+d[r]+'" style="background-color: '+d[r]+"; left: "+(20*r+50)+'px" onclick="edcal.selectColor(\''+t+"', '"+d[r]+"'); return false;\"></a>";return e+="</div>"},selectColor:function(e,t){edcal.output("selectColor("+e+", "+t+")"),jQuery("#"+e+" .colorlabel").css("background-color",t),jQuery("#"+e+" .colorselected").removeClass("colorselected"),
jQuery("#"+e+"value").addClass("colorselected")},isPrefChecked:function(e){return e?' checked="checked" ':""},saveOptions:function(){var e=parseInt(jQuery("#edcal_weeks_pref").val(),10);if(1>e||e>8)humanMsg.displayMsg(edcal.str_weekserror);else{var t=edcal.ajax_url()+"&action=edcal_saveoptions&weeks="+encodeURIComponent(jQuery("#edcal_weeks_pref").val());jQuery("#calendar-fields-prefs").find("input, textarea, select").each(function(){t+="&"+encodeURIComponent(this.name)+"="+encodeURIComponent(this.checked)}),jQuery.ajax({url:t,type:"POST",processData:!1,timeout:1e5,dataType:"text",success:function(e){window.location.href=window.location.href},error:function(e){edcal.showError(edcal.general_error),e.responseText&&edcal.output("saveOptions xhr.responseText: "+e.responseText)}})}},output:function(e){window.console&&console.log(e)},showError:function(e){window.console&&console.error(e),edcal.displayMessage(e)},displayMessage:function(e){humanMsg.displayMsg(e)},getUrlVars:function(){for(var e,t=[],a=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),d=0;d<a.length;d++)e=a[d].split("="),t.push(e[0]),t[e[0]]=e[1];return t},showFatalError:function(e){jQuery("#edcal_main_title").after('<div class="error below-h2" id="message"><p>'+edcal.str_fatal_error+e+"<br></p></div>"),window.console&&console.error(e)},chineseAposWorkaround:function(e){return 0===Date.CultureInfo.name.indexOf("zh")||0===Date.CultureInfo.name.indexOf("ja")?e.replace(/'/g,""):e}};jQuery.fn.center=function(){return this.css("position","absolute"),this.css("top",(jQuery(window).height()-this.outerHeight())/2+jQuery(window).scrollTop()+"px"),this.css("left",(jQuery(window).width()-this.outerWidth())/2+jQuery(window).scrollLeft()+"px"),this},jQuery(document).ready(function(){try{edcal.init()}catch(e){edcal.output("Error loading calendar: "+e),edcal.showFatalError(e.description)}edcal.getUrlVars().qunit&&edcal_test.runTests()});
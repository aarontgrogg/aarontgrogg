var Validator={isEmail:function(s){return this.test(s,"^[-!#$%&'*+\\./0-9=?A-Z^_`a-z{|}~]+@[-!#$%&'*+\\/0-9=?A-Z^_`a-z{|}~]+.[-!#$%&'*+\\./0-9=?A-Z^_`a-z{|}~]+$")},isAbsUrl:function(s){return this.test(s,"^(news|telnet|nttp|file|http|ftp|https)://[-A-Za-z0-9\\.]+\\/?.*$")},isSize:function(s){return this.test(s,"^[0-9.]+(%|in|cm|mm|em|ex|pt|pc|px)?$")},isId:function(s){return this.test(s,"^[A-Za-z_]([A-Za-z0-9_])*$")},isEmpty:function(s){var t,e;if("SELECT"==s.nodeName&&s.selectedIndex<1)return!0;if("checkbox"==s.type&&!s.checked)return!0;if("radio"==s.type){for(e=0,t=s.form.elements;e<t.length;e++)if("radio"==t[e].type&&t[e].name==s.name&&t[e].checked)return!1;return!0}return new RegExp("^\\s*$").test(1==s.nodeType?s.value:s)},isNumber:function(s,t){return!(isNaN(1==s.nodeType?s.value:s)||t&&this.test(s,"^-?[0-9]*\\.[0-9]*$"))},test:function(s,t){return s=1==s.nodeType?s.value:s,""==s||new RegExp(t).test(s)}},AutoValidator={settings:{id_cls:"id",int_cls:"int",url_cls:"url",number_cls:"number",email_cls:"email",size_cls:"size",required_cls:"required",invalid_cls:"invalid",min_cls:"min",max_cls:"max"},init:function(s){var t;for(t in s)this.settings[t]=s[t]},validate:function(s){var t,e,i=this.settings,a=0;for(e=this.tags(s,"label"),t=0;t<e.length;t++)this.removeClass(e[t],i.invalid_cls),e[t].setAttribute("aria-invalid",!1);return a+=this.validateElms(s,"input"),a+=this.validateElms(s,"select"),a+=this.validateElms(s,"textarea"),3==a},invalidate:function(s){this.mark(s.form,s)},getErrorMessages:function(s){var t,e,i,a,n=this.settings,l=[],r=tinyMCEPopup.editor;for(t=this.tags(s,"label"),e=0;e<t.length;e++)this.hasClass(t[e],n.invalid_cls)&&(i=document.getElementById(t[e].getAttribute("for")),a={field:t[e].textContent},this.hasClass(i,n.min_cls,!0)?(message=r.getLang("invalid_data_min"),a.min=this.getNum(i,n.min_cls)):this.hasClass(i,n.number_cls)?message=r.getLang("invalid_data_number"):this.hasClass(i,n.size_cls)?message=r.getLang("invalid_data_size"):message=r.getLang("invalid_data"),message=message.replace(/{\#([^}]+)\}/g,function(s,t){return a[t]||"{#"+t+"}"}),l.push(message));return l},reset:function(s){var t,e,i,a=["label","input","select","textarea"],n=this.settings;if(null!=s)for(t=0;t<a.length;t++)for(i=this.tags(s.form?s.form:s,a[t]),e=0;e<i.length;e++)this.removeClass(i[e],n.invalid_cls),i[e].setAttribute("aria-invalid",!1)},validateElms:function(s,t){var e,i,a,n,l=this.settings,r=!0,m=Validator;for(e=this.tags(s,t),i=0;i<e.length;i++)a=e[i],this.removeClass(a,l.invalid_cls),this.hasClass(a,l.required_cls)&&m.isEmpty(a)&&(r=this.mark(s,a)),this.hasClass(a,l.number_cls)&&!m.isNumber(a)&&(r=this.mark(s,a)),this.hasClass(a,l.int_cls)&&!m.isNumber(a,!0)&&(r=this.mark(s,a)),this.hasClass(a,l.url_cls)&&!m.isAbsUrl(a)&&(r=this.mark(s,a)),this.hasClass(a,l.email_cls)&&!m.isEmail(a)&&(r=this.mark(s,a)),this.hasClass(a,l.size_cls)&&!m.isSize(a)&&(r=this.mark(s,a)),this.hasClass(a,l.id_cls)&&!m.isId(a)&&(r=this.mark(s,a)),this.hasClass(a,l.min_cls,!0)&&(n=this.getNum(a,l.min_cls),(isNaN(n)||parseInt(a.value)<parseInt(n))&&(r=this.mark(s,a))),this.hasClass(a,l.max_cls,!0)&&(n=this.getNum(a,l.max_cls),(isNaN(n)||parseInt(a.value)>parseInt(n))&&(r=this.mark(s,a)));return r},hasClass:function(s,t,e){return new RegExp("\\b"+t+(e?"[0-9]+":"")+"\\b","g").test(s.className)},getNum:function(s,t){return t=s.className.match(new RegExp("\\b"+t+"([0-9]+)\\b","g"))[0],t=t.replace(/[^0-9]/g,"")},addClass:function(s,t,e){var i=this.removeClass(s,t);s.className=e?t+(""!=i?" "+i:""):(""!=i?i+" ":"")+t},removeClass:function(s,t){return t=s.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," "),s.className=" "!=t?t:""},tags:function(s,t){return s.getElementsByTagName(t)},mark:function(s,t){var e=this.settings;return this.addClass(t,e.invalid_cls),t.setAttribute("aria-invalid","true"),this.markLabels(s,t,e.invalid_cls),!1},markLabels:function(s,t,e){var i,a;for(i=this.tags(s,"label"),a=0;a<i.length;a++)(i[a].getAttribute("for")==t.id||i[a].htmlFor==t.id)&&this.addClass(i[a],e);return null}};
tinyMCEPopup.requireLangPack();var SearchReplaceDialog={init:function(e){var n=this,a=document.forms[0],c=tinyMCEPopup.getWindowArg("mode");n.switchMode(c),a[c+"_panel_searchstring"].value=tinyMCEPopup.getWindowArg("search_string"),a[c+"_panel_searchstring"].focus(),mcTabs.onChange.add(function(e,a){n.switchMode(e.substring(0,e.indexOf("_")))})},switchMode:function(e){var n,a=this.lastMode;a!=e&&(n=document.forms[0],a&&(n[e+"_panel_searchstring"].value=n[a+"_panel_searchstring"].value,n[e+"_panel_backwardsu"].checked=n[a+"_panel_backwardsu"].checked,n[e+"_panel_backwardsd"].checked=n[a+"_panel_backwardsd"].checked,n[e+"_panel_casesensitivebox"].checked=n[a+"_panel_casesensitivebox"].checked),mcTabs.displayTab(e+"_tab",e+"_panel"),document.getElementById("replaceBtn").style.display="replace"==e?"inline":"none",document.getElementById("replaceAllBtn").style.display="replace"==e?"inline":"none",this.lastMode=e)},searchNext:function(e){function n(){o=s.getRng().cloneRange(),i.getDoc().execCommand("SelectAll",!1,null),s.setRng(o)}function a(){i.selection.setContent(rs)}var c,t,l,i=tinyMCEPopup.editor,s=i.selection,o=s.getRng(),r=this.lastMode,d=0,p=i.getWin(),g=(i.windowManager,0);if(c=document.forms[0],t=c[r+"_panel_searchstring"].value,l=c[r+"_panel_backwardsu"].checked,ca=c[r+"_panel_casesensitivebox"].checked,rs=c.replace_panel_replacestring.value,tinymce.isIE&&(o=i.getDoc().selection.createRange()),""!=t){switch(ca&&(d=4|d),e){case"all":if(i.execCommand("SelectAll"),i.selection.collapse(!0),tinymce.isIE){for(i.focus(),o=i.getDoc().selection.createRange();o.findText(t,l?-1:1,d);)o.scrollIntoView(),o.select(),a(),g=1,l&&o.moveEnd("character",-rs.length);tinyMCEPopup.storeSelection()}else for(;p.find(t,ca,l,!1,!1,!1,!1);)a(),g=1;return void(g?tinyMCEPopup.alert(i.getLang("searchreplace_dlg.allreplaced")):tinyMCEPopup.alert(i.getLang("searchreplace_dlg.notfound")));case"current":i.selection.isCollapsed()||a()}s.collapse(l),o=s.getRng(),t&&(tinymce.isIE?(i.focus(),o=i.getDoc().selection.createRange(),o.findText(t,l?-1:1,d)?(o.scrollIntoView(),o.select()):tinyMCEPopup.alert(i.getLang("searchreplace_dlg.notfound")),tinyMCEPopup.storeSelection()):p.find(t,ca,l,!1,!1,!1,!1)?n():tinyMCEPopup.alert(i.getLang("searchreplace_dlg.notfound")))}}};tinyMCEPopup.onInit.add(SearchReplaceDialog.init,SearchReplaceDialog);
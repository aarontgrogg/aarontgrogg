var snowStorm=function(e,t){function i(e,t){return isNaN(t)&&(t=0),Math.random()*e+t}function s(e){return 1===parseInt(i(2),10)?-1*e:e}function n(){e.setTimeout(function(){o.start(!0)},20),o.events.remove(r?t:e,"mousemove",n)}function l(){o.excludeMobile&&h||(o.freezeOnBlur?o.events.add(r?t:e,"mousemove",n):n()),o.events.remove(e,"load",l)}this.autoStart=!0,this.flakesMax=60,this.flakesMaxActive=60,this.animationInterval=40,this.excludeMobile=!0,this.flakeBottom=null,this.followMouse=!0,this.snowColor="#fff",this.snowCharacter="&bull;",this.snowStick=!1,this.targetElement=null,this.useMeltEffect=!0,this.useTwinkleEffect=!1,this.usePositionFixed=!1,this.freezeOnBlur=!0,this.flakeLeftOffset=0,this.flakeRightOffset=0,this.flakeWidth=5,this.flakeHeight=5,this.vMaxX=2.5,this.vMaxY=2.5,this.zIndex=1e5;var o=this,a=this,r=navigator.userAgent.match(/msie/i),f=navigator.userAgent.match(/msie 6/i),m=navigator.appVersion.match(/windows 98/i),h=navigator.userAgent.match(/mobile|opera m(ob|in)/i),c=r&&"BackCompat"===t.compatMode,u=h||c||f,d=null,v=null,k=null,y=null,g=null,p=null,x=1,w=2,E=6,F=!1,b=function(){try{t.createElement("div").style.opacity="0.5"}catch(e){return!1}return!0}(),z=!1,H=t.createDocumentFragment();return this.timers=[],this.flakes=[],this.disabled=!1,this.active=!1,this.meltFrameCount=20,this.meltFrames=[],this.events=function(){function t(e){var t=o.call(e),i=t.length;return l?(t[1]="on"+t[1],i>3&&t.pop()):3===i&&t.push(!1),t}function i(e,t){var i=e.shift(),s=[a[t]];l?i[s](e[0],e[1]):i[s].apply(i,e)}function s(){i(t(arguments),"add")}function n(){i(t(arguments),"remove")}var l=!e.addEventListener&&e.attachEvent,o=Array.prototype.slice,a={add:l?"attachEvent":"addEventListener",remove:l?"detachEvent":"removeEventListener"};return{add:s,remove:n}}(),this.randomizeWind=function(){var e;if(g=s(i(o.vMaxX,.2)),p=i(o.vMaxY,.2),this.flakes)for(e=0;e<this.flakes.length;e++)this.flakes[e].active&&this.flakes[e].setVelocities()},this.scrollHandler=function(){var i;if(y=o.flakeBottom?0:parseInt(e.scrollY||t.documentElement.scrollTop||t.body.scrollTop,10),isNaN(y)&&(y=0),!F&&!o.flakeBottom&&o.flakes)for(i=o.flakes.length;i--;)0===o.flakes[i].active&&o.flakes[i].stick()},this.resizeHandler=function(){e.innerWidth||e.innerHeight?(d=e.innerWidth-16-o.flakeRightOffset,k=o.flakeBottom?o.flakeBottom:e.innerHeight):(d=(t.documentElement.clientWidth||t.body.clientWidth||t.body.scrollWidth)-(r?0:8)-o.flakeRightOffset,k=o.flakeBottom?o.flakeBottom:t.documentElement.clientHeight||t.body.clientHeight||t.body.scrollHeight),v=parseInt(d/2,10)},this.resizeHandlerAlt=function(){d=o.targetElement.offsetLeft+o.targetElement.offsetWidth-o.flakeRightOffset,k=o.flakeBottom?o.flakeBottom:o.targetElement.offsetTop+o.targetElement.offsetHeight,v=parseInt(d/2,10)},this.freeze=function(){var e;if(o.disabled)return!1;for(o.disabled=1,e=o.timers.length;e--;)clearInterval(o.timers[e])},this.resume=function(){return o.disabled?(o.disabled=0,void o.timerInit()):!1},this.toggleSnow=function(){o.flakes.length?(o.active=!o.active,o.active?(o.show(),o.resume()):(o.stop(),o.freeze())):o.start()},this.stop=function(){var i;for(this.freeze(),i=this.flakes.length;i--;)this.flakes[i].o.style.display="none";o.events.remove(e,"scroll",o.scrollHandler),o.events.remove(e,"resize",o.resizeHandler),o.freezeOnBlur&&(r?(o.events.remove(t,"focusout",o.freeze),o.events.remove(t,"focusin",o.resume)):(o.events.remove(e,"blur",o.freeze),o.events.remove(e,"focus",o.resume)))},this.show=function(){var e;for(e=this.flakes.length;e--;)this.flakes[e].o.style.display="block"},this.SnowFlake=function(e,s,n,l){var o=this,a=e;this.type=s,this.x=n||parseInt(i(d-20),10),this.y=isNaN(l)?-i(k)-12:l,this.vX=null,this.vY=null,this.vAmpTypes=[1,1.2,1.4,1.6,1.8],this.vAmp=this.vAmpTypes[this.type],this.melting=!1,this.meltFrameCount=a.meltFrameCount,this.meltFrames=a.meltFrames,this.meltFrame=0,this.twinkleFrame=0,this.active=1,this.fontSize=10+this.type/5*10,this.o=t.createElement("div"),this.o.innerHTML=a.snowCharacter,this.o.style.color=a.snowColor,this.o.style.position=F?"fixed":"absolute",this.o.style.width=a.flakeWidth+"px",this.o.style.height=a.flakeHeight+"px",this.o.style.fontFamily="arial,verdana",this.o.style.cursor="default",this.o.style.overflow="hidden",this.o.style.fontWeight="normal",this.o.style.zIndex=a.zIndex,H.appendChild(this.o),this.refresh=function(){return isNaN(o.x)||isNaN(o.y)?!1:(o.o.style.left=o.x+"px",void(o.o.style.top=o.y+"px"))},this.stick=function(){u||a.targetElement!==t.documentElement&&a.targetElement!==t.body?o.o.style.top=k+y-a.flakeHeight+"px":a.flakeBottom?o.o.style.top=a.flakeBottom+"px":(o.o.style.display="none",o.o.style.top="auto",o.o.style.bottom="0px",o.o.style.position="fixed",o.o.style.display="block")},this.vCheck=function(){o.vX>=0&&o.vX<.2?o.vX=.2:o.vX<0&&o.vX>-.2&&(o.vX=-.2),o.vY>=0&&o.vY<.2&&(o.vY=.2)},this.move=function(){var e,t=o.vX*x;o.x+=t,o.y+=o.vY*o.vAmp,o.x>=d||d-o.x<a.flakeWidth?o.x=0:0>t&&o.x-a.flakeLeftOffset<-a.flakeWidth&&(o.x=d-a.flakeWidth-1),o.refresh(),e=k+y-o.y,e<a.flakeHeight?(o.active=0,a.snowStick?o.stick():o.recycle()):(a.useMeltEffect&&o.active&&o.type<3&&!o.melting&&Math.random()>.998&&(o.melting=!0,o.melt()),a.useTwinkleEffect&&(o.twinkleFrame?(o.twinkleFrame--,o.o.style.visibility=o.twinkleFrame&&o.twinkleFrame%2===0?"hidden":"visible"):Math.random()>.9&&(o.twinkleFrame=parseInt(20*Math.random(),10))))},this.animate=function(){o.move()},this.setVelocities=function(){o.vX=g+i(.12*a.vMaxX,.1),o.vY=p+i(.12*a.vMaxY,.1)},this.setOpacity=function(e,t){return b?void(e.style.opacity=t):!1},this.melt=function(){a.useMeltEffect&&o.melting&&o.meltFrame<o.meltFrameCount?(o.setOpacity(o.o,o.meltFrames[o.meltFrame]),o.o.style.fontSize=o.fontSize-o.fontSize*(o.meltFrame/o.meltFrameCount)+"px",o.o.style.lineHeight=a.flakeHeight+2+.75*a.flakeHeight*(o.meltFrame/o.meltFrameCount)+"px",o.meltFrame++):o.recycle()},this.recycle=function(){o.o.style.display="none",o.o.style.position=F?"fixed":"absolute",o.o.style.bottom="auto",o.setVelocities(),o.vCheck(),o.meltFrame=0,o.melting=!1,o.setOpacity(o.o,1),o.o.style.padding="0px",o.o.style.margin="0px",o.o.style.fontSize=o.fontSize+"px",o.o.style.lineHeight=a.flakeHeight+2+"px",o.o.style.textAlign="center",o.o.style.verticalAlign="baseline",o.x=parseInt(i(d-a.flakeWidth-20),10),o.y=parseInt(-1*i(k),10)-a.flakeHeight,o.refresh(),o.o.style.display="block",o.active=1},this.recycle(),this.refresh()},this.snow=function(){var e,t=0,s=0,n=0,l=null;for(e=o.flakes.length;e--;)1===o.flakes[e].active?(o.flakes[e].move(),t++):0===o.flakes[e].active?s++:n++,o.flakes[e].melting&&o.flakes[e].melt();t<o.flakesMaxActive&&(l=o.flakes[parseInt(i(o.flakes.length),10)],0===l.active&&(l.melting=!0))},this.mouseMove=function(e){if(!o.followMouse)return!0;var t=parseInt(e.clientX,10);v>t?x=-w+t/v*w:(t-=v,x=t/v*w)},this.createSnow=function(e,t){var s;for(s=0;e>s;s++)o.flakes[o.flakes.length]=new o.SnowFlake(o,parseInt(i(E),10)),(t||s>o.flakesMaxActive)&&(o.flakes[o.flakes.length-1].active=-1);a.targetElement.appendChild(H)},this.timerInit=function(){o.timers=m?[setInterval(o.snow,3*o.animationInterval),setInterval(o.snow,o.animationInterval)]:[setInterval(o.snow,o.animationInterval)]},this.init=function(){var i;for(i=0;i<o.meltFrameCount;i++)o.meltFrames.push(1-i/o.meltFrameCount);o.randomizeWind(),o.createSnow(o.flakesMax),o.events.add(e,"resize",o.resizeHandler),o.events.add(e,"scroll",o.scrollHandler),o.freezeOnBlur&&(r?(o.events.add(t,"focusout",o.freeze),o.events.add(t,"focusin",o.resume)):(o.events.add(e,"blur",o.freeze),o.events.add(e,"focus",o.resume))),o.resizeHandler(),o.scrollHandler(),o.followMouse&&o.events.add(r?t:e,"mousemove",o.mouseMove),o.animationInterval=Math.max(20,o.animationInterval),o.timerInit()},this.start=function(e){if(z){if(e)return!0}else z=!0;if("string"==typeof o.targetElement){var i=o.targetElement;if(o.targetElement=t.getElementById(i),!o.targetElement)throw new Error('Snowstorm: Unable to get targetElement "'+i+'"')}o.targetElement||(o.targetElement=r?t.body:t.documentElement?t.documentElement:t.body),o.targetElement!==t.documentElement&&o.targetElement!==t.body&&(o.resizeHandler=o.resizeHandlerAlt),o.resizeHandler(),o.usePositionFixed=o.usePositionFixed&&!u,F=o.usePositionFixed,d&&k&&!o.disabled&&(o.init(),o.active=!0)},o.autoStart&&o.events.add(e,"load",l,!1),this}(window,document);